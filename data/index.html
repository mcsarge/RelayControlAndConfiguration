<!DOCTYPE html>
<html>
  <head>
    <title>%NAME%</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  </head>
  <body>
    <div class="topnav">
      <h1>%NAME%</h1>
    </div>
    <div class="content">
      <div class="card-grid">
        <div class="card">
            %RELAYSWITCHES%
        </div>
      </div>
      <div>
        <br>
        <a href="/relayconfig">Configure Relays</a>
      </div>
    </div>
    <script>
      if (!!window.EventSource) {
       var source = new EventSource('/events');
       
       source.addEventListener('open', function(e) {
        console.log("Events Connected");
       }, false);

       source.addEventListener('error', function(e) {
        if (e.target.readyState != EventSource.OPEN) {
          console.log("Events Disconnected");
        }
       }, false);
       
       source.addEventListener('message', function(e) {
        console.log("message", e.data);
       }, false);
       
       %RELAYEVENTLISTENERS%
       
      }
      function toggleCheckbox(element) {
        var xhr = new XMLHttpRequest();
        if(element.checked){ xhr.open("GET", "/update?output="+element.id+"&state=1", true); }
        else { xhr.open("GET", "/update?output="+element.id+"&state=0", true); }
        xhr.send();
      }
      </script>
  </body>
</html>